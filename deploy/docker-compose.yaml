# Use postgres/example user/password credentials
version: '3.1'

services:
  db:
    image: postgres
    restart: always
    ports:
      - "25432:5432"
    environment:
      POSTGRES_PASSWORD: ${DB_PASSWORD}
    volumes:
        - wedding-data:/var/lib/postgresql/data
  api:
    image: sconnel42/wedding-api
    restart: always
    ports:
      - "3000:3000"
    environment:
      PROJECT_ROOT: ${PROJECT_ROOT}
      SERVER_PORT: ${SERVER_PORT}
      DB_DIALECT: ${DB_DIALECT}
      USE_PROD: ${USE_PROD}
      DB_CONNECTION_STRING: ${DB_CONNECTION_STRING}
      TWILIO_API_KEY: ${TWILIO_API_KEY}
      TWILIO_API_SECRET: ${TWILIO_API_SECRET}
      TWILIO_PHONE_NUMBER: ${TWILIO_PHONE_NUMBER}
      ADMIN_PHONE_NUMBER: ${ADMIN_PHONE_NUMBER}
  frontend:
    image: sconnel42/wedding-fe
    restart: always
    ports:
      - "8080:80"

volumes:
  wedding-data:

networks:
  default:
    external:
      name: wedding-net
